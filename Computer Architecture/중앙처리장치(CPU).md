# 중앙처리장치(CPU) 동작원리

### 중앙처리장치(CPU)

컴퓨터에서 가장 핵심적인 역할을 수행하는 부분으로서 ‘인간의 두뇌’의 해당

연산장치, 제어장치, 레지스터 3가지로 나눌 수 있음

**연산 장치**

덧셈, 뺄셈, 곱셉, 나눗셈 등의 산술연산과 논리곱, 논리합, 부정 등의 논리연산을 수행

두 가지 연산을 모두 수행하기 때문에 산술 논리 연산 장치라고도 함

연산장치는 연산에 필요한 데이터를 레지스터에서 가져오고, 연산 결과를 다시 레지스터에 보내 저장

**제어 장치**

명령어 순서대로 실행할 수 있도록 제어하는 장치

주기억장치에서 프로그램 명령어를 꺼내 해독 후, 해독한 결과에 따라 명렁어 실행에 필요한 제어 신호를 기억장치, 연산장치, 입출력장치로 보냄

이 신호를 받아 다음에 수행할 동작을 결정

**레지스터**

중앙처리장치의 속도와 비슷한 고속 기억장치

명령어 주소, 명령어 코드, 연산에 필요한 데이터, 연산 결과 등을 임시 저장

범용 레지스터와 특수 목적 레지스터로 구분

중앙처리장치의 종류에 따라 사용할 수 있는 레지스터의 개수와 크기가 다름

범용 레지스터는 연산에 필요한 데이터나 연산 결과를 임시 저장함

특수 목적 레지스터는 특별한 용도로 사용하는 레지스터로 용도와 기능에 따라 구분됨

**특수 목적 레지스터**

메모리 주소 레지스터(MAR) : 읽기와 쓰기 연산을 수행할 주기억장치의 주소 저장

프로그램 카운터(PC) : 다음에 수행할 명령어의 주소를 저장

명령어 레지스터(IR) : 현재 실행 중인 명령어 저장

메모리 버퍼 레지스터(MBR) : 주기억장치에서 읽어온 데이터나 주기억장치에 저장할 데이터를 임시 저장

누산기(AC) : 연산 결과 임시 저장

-   주기억장치 : RAM , ROM / CPU가 처리하고 있는 내용을 저장하고 있는 기억장치

-   보조기억장치 : HDD, SSD / 주기억장치보다 느리지만 전원을 끄더라도 데이터가 사라지지 않고 영구 저장

**중앙처리장치 동작 과정**

1. 주기억장치는 입력장치에서 입력 받은 데이터나 보조기억장치에 저장된 프로그램 읽어오기
2. 중앙처리장치는 프로그램을 실행하기 위해 주기억장치에 저장된 프로그램 명령어와 데이터를 읽어 처리하고 결과를 다시 주기억장치에 저장
3. 주기억장치는 처리 결과를 보조기억장치에 저장하거나 출력장치로 내보냄
4. 제어장치는 1 ~ 3 과정에서 명령어가 순서대로 실행될 수 있도록 장치 제어

**명령어 세트**

중앙처리장치가 실행할 명령어 집합으로 중앙처리장치에 따라 형식과 종류가 다름

명령어는 실행할 연산을 나태나는 **연산 코드**와 연산에 필요한 데이터나 데이터의 저장 위치를 나타내는 **피연산자**로 구성

**연산 코드**

연산 기능 : 사칙연산, 시프트, 보수 등의 산술 연산 + 논리 곱, 논리 합, 부정등의 논리 연산

제어 기능 : 조건 분기와 무조건 분기 등을 사용하여 명령어의 실행 순서 제어

데이터 전달 기능 : 레지스터와 레지스터 사이, 레지스터와 주기억장치 사이에서 데이터 전달

입출력 기능 : 프로그램과 데이터를 주기억장치에 전달, 연산 결과는 출력장치에 전달

**피연산자**

주소 : 기억장치 혹은 레지스터의 주소 저장

숫자/문자 : 숫자는 정수, 고정 소수점 수, 부동 소수점 수 및 각각의 코드, 문자는 아스키 코드로 저장

논리 데이 터 : 참 또는 거짓을 표현할 때 사용하며 비트나 플래그로 저장

**명령어 사이클**

중앙처리장치가 주기억장치에서 한 번에 하나의 명령어를 인출하여 실행하는 필요한 일련의 활동

명령어 사이클은 인출 사이클 + 실행 사이클로 나눌 수 있음

더 세분화 하면 인출사이클, 실행 사이클, 간접사이클,인터럽트 사이클로 나눔

인출 실행은 항상 수행 간접 사이클과 인터럽트 사이클은 주소 지정 방식이 필요할 때나 인터럽트 요구가 있을 때 수행

**인출 사이클의 마이크로 연산**

![Untitled](https://user-images.githubusercontent.com/55469012/158582529-a19c5315-1ce6-4234-a7a3-00ee839dc4ac.png)

T0 : MAR <- PC // MAR에 PC 전달

T1 : MBR <- M[MAR], PC <- PC + 1 // MBR에 인출명령어 저장, 다음 명령어 인출을 위해 PC증가

T2 : IR <- MBR // MBR 에 저장된 내용을 IR에 전달

**ADD addr 명령어 연산**

![Untitled 1](https://user-images.githubusercontent.com/55469012/158582611-1bbff362-b199-4625-a882-70418b29bd4e.png)

T0 : MAR <- IR(Addr)

T1 : MBR <- M[MAR]

T2 : AC <- AC + MBR // AC에 저장된 값에 ADD

참고 사이트 : [https://ndb796.tistory.com/7](https://ndb796.tistory.com/7)
